# ðŸ§  OSPF Cheat Sheet (Quick Reference)

## 1ï¸âƒ£ What OSPF Is

* **Link-state routing protocol**
* Uses **Dijkstra SPF algorithm**
* Builds a **Link-State Database (LSDB)**
* Metric = **Cost (bandwidth-based)**
* Runs **directly over IP (protocol 89)**

---

## 2ï¸âƒ£ OSPF Packet Types

| Type | Name                       | Purpose                        |
| ---- | -------------------------- | ------------------------------ |
| 1    | Hello                      | Neighbor discovery & keepalive |
| 2    | DBD (Database Description) | Summary of LSDB                |
| 3    | LSR (Link State Request)   | Requests missing LSAs          |
| 4    | LSU (Link State Update)    | Sends LSAs                     |
| 5    | LSAck                      | Acknowledges LSAs              |

---

## 3ï¸âƒ£ Neighbor States (ðŸ”¥ Memorize This Order)

```
Down â†’ Init â†’ 2-Way â†’ ExStart â†’ Exchange â†’ Loading â†’ Full
```

**Key Notes**

* **2-Way** = neighbors see each other
* **Full** = LSDBs synchronized
* **DROTHER routers stop at 2-Way on broadcast networks**

---

## 4ï¸âƒ£ OSPF Areas

| Area                   | Purpose                                 |
| ---------------------- | --------------------------------------- |
| Area 0                 | Backbone (required)                     |
| Standard Area          | Normal LSA flow                         |
| Stub                   | Blocks Type 5 (External)                |
| Totally Stubby (Cisco) | Blocks Type 3 & 5                       |
| NSSA                   | Allows limited external routes (Type 7) |

**Rules**

* All non-backbone areas must connect to **Area 0**
* ABRs connect **multiple areas**
* Virtual links are a **last resort**

---

## 5ï¸âƒ£ LSA Types (High-Value Exam + Real-World)

| LSA | Name          | Generated By     |
| --- | ------------- | ---------------- |
| 1   | Router LSA    | All routers      |
| 2   | Network LSA   | DR               |
| 3   | Summary LSA   | ABR              |
| 4   | ASBR Summary  | ABR              |
| 5   | External LSA  | ASBR             |
| 7   | NSSA External | ASBR (NSSA only) |

---

## 6ï¸âƒ£ DR / BDR Election

**Occurs on:**

* Broadcast (Ethernet)
* NBMA

**Does NOT occur on:**

* Point-to-point
* Point-to-multipoint

**Election Order**

1. Highest **OSPF Priority**
2. Highest **Router ID**

**Defaults**

* Priority: `1`
* `0` = never become DR/BDR

---

## 7ï¸âƒ£ Router ID Selection

1. Manually configured `router-id`
2. Highest loopback IP
3. Highest active interface IP

ðŸ“Œ **Changing Router ID requires process restart**

---

## 8ï¸âƒ£ OSPF Cost Formula

```
Cost = Reference Bandwidth / Interface Bandwidth
```

* Default reference bandwidth: **100 Mbps**
* Update for modern networks:

```
auto-cost reference-bandwidth 100000
```

---

## 9ï¸âƒ£ OSPF Network Types

| Type                | DR/BDR | Common Use |
| ------------------- | ------ | ---------- |
| Broadcast           | Yes    | Ethernet   |
| Point-to-Point      | No     | WAN links  |
| NBMA                | Yes    | Legacy WAN |
| Point-to-Multipoint | No     | Hub-spoke  |

---

## ðŸ”Ÿ OSPF Authentication

| Type      | Notes             |
| --------- | ----------------- |
| Plaintext | Not secure        |
| MD5       | Legacy but common |
| SHA       | Preferred         |

**Authentication must match on both sides**

---

## 1ï¸âƒ£1ï¸âƒ£ Common OSPF Timers

| Timer | Broadcast |
| ----- | --------- |
| Hello | 10 sec    |
| Dead  | 40 sec    |

ðŸ“Œ **Hello + Dead timers must match**

---

## 1ï¸âƒ£2ï¸âƒ£ Route Preference (Administrative Distance)

| Route Type    | AD  |
| ------------- | --- |
| OSPF Internal | 110 |
| OSPF External | 110 |

---

## 1ï¸âƒ£3ï¸âƒ£ Redistribution Basics

* External routes become **LSA Type 5**
* Metric Types:

  * **E1** = includes internal cost (preferred)
  * **E2** = external cost only (default)

---

## 1ï¸âƒ£4ï¸âƒ£ Must-Know Troubleshooting Commands (Cisco)

```bash
show ip ospf neighbor
show ip ospf interface
show ip route ospf
show ip ospf database
debug ip ospf adj
```

---

## 1ï¸âƒ£5ï¸âƒ£ Top OSPF Failure Causes (Real-World)

âŒ Area mismatch
âŒ Hello / Dead timer mismatch
âŒ Authentication mismatch
âŒ MTU mismatch
âŒ Network type mismatch
âŒ Duplicate Router IDs

---

## ðŸ§  Memory Hooks (Exam Gold)

* **â€œHello builds neighbors, LSAs build routesâ€**
* **DR election is NOT preemptive**
* **All roads lead to Area 0**
* **E1 > E2 in real networks**
